<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<div *ngIf="this.StoreData==false" class="overlay">
  <mat-progress-spinner class="spinner" [color]="color" [mode]="mode" [value]="value" diameter="50" *ngIf="this.StoreData==false"></mat-progress-spinner>
</div>
<div class="container ">
  <div class="row mb-3 mt-4 ">
    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
      <button routerLink="/main/analytics/campaignlist" class="border-rem">
      <mat-icon class="backbtn">keyboard_arrow_left
      </mat-icon>
      </button>
      <svg width="20" height="24" viewBox="0 0 20 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M10 23.5712C10 23.5712 0 20.08 0 13.9285V3.57124L10 0L20 3.57124V13.9285C19.9998 20.0801 10 23.5712 10 23.5712ZM18.5713 4.81628L10 1.78577L1.42871 4.81628V13.6042C1.42871 18.8236 10 21.7857 10 21.7857C10 21.7857 18.5713 18.8236 18.5713 13.6042V4.81628ZM10 20.7143C10 20.7143 2.50012 18.0698 2.50012 13.4096V5.5634L10 2.85761L17.4999 5.5634V13.4096C17.4999 18.0697 10 20.7143 10 20.7143Z" fill="#38A3A5"/>
        </svg>
        <span class="mt-2">Detail View</span>        
    </div>
    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 mt-3">
    </div>
</div>

<div class="container-lg">
 <div class="row">
  <div class="mat-elevation-z8 col-lg-6 col-md-12 col-sm-12 col-xs-12 mt-1 circle-box1 ">
    
    <div class="col-md-12">
    <div class="row col-lg-12 col-md-6 col-sm-12 col-xs-12 sub-heading mt-2" >
      <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9 sub-heading mt-2" >
        <strong>Email Subject :</strong> 
        <span id="emailsub" class="col-lg-12 col-md-6 col-sm-12 col-xs-12">{{this.emailSubject}}</span>
      </div>
      <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 mt-2 sub-heading">
     <strong class="float-right">Status : {{this.status}} 
        </strong>
    </div>
    </div>


    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mt-3 sub-heading">
        <mat-form-field appearance="outline" class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <mat-label class="text-black">Description</mat-label>
        <textarea matInput 
        [value]="this.desc"
        cdkTextareaAutosize
        #autosize="cdkTextareaAutosize"
        cdkAutosizeMaxRows="15"
        cdkAutosizeMinRows="10"
        disabled="true"
        class="text-black"></textarea>
      </mat-form-field>
    </div>

    <div class="col-lg-12 col-md-6 col-sm-12 col-xs-12 mt-2 sub-heading">
      <strong>Remarks : {{this.remarks}}</strong>
      </div>

  </div>
  <div class="row mt-4">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 left-bottom-center mb-3">
      <!-- <button type="submit" mat-raised-button (click)="endcamp(); clickbtn=true;" [disabled]="clickbtn" class="endcamp p-2" [ngStyle]="{'background-color':clickbtn == false ? '#7A2AB4;' : 'grey' }">End Campaign</button> -->
      <button type="submit" *ngIf="(this.isendactive==='true' && this.status=='SENT')" mat-raised-button (click)="endcamp()" class="endcamp col-lg-6 align-self-end p-2"  >End Campaign</button> 
      <button type="submit" *ngIf="(this.isendactive==='true' && this.status=='KILLED')" mat-raised-button (click)="endcamp()" class="endcamp col-lg-6 align-self-end  p-2"  >End Campaign</button> 
      <button type="submit" *ngIf="this.isendactive==='false' || (this.status=='FAILED' || this.status=='IN PROGRESS') " mat-raised-button class="endcamp2 align-self-end col-lg-6 p-2"  >End Campaign</button> 
      
      
      <button type="submit" *ngIf="this.killcam==false && this.status=='IN PROGRESS'" mat-raised-button (click)="killcamp()" class="killcamp p-2 "  >Kill Campaign</button> 
      <button type="submit" *ngIf="this.killcam==true || (this.status=='SENT' || this.status=='FAILED' || this.status=='KILLED' || this.status=='ENDED')" mat-raised-button class="killcamp2 p-2 "  >Kill Campaign</button> 


    </div>
  </div>
</div>
  <div class="col-lg-5 col-md-12 col-sm-12 col-xs-12 mt-1 circle-box">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mt-3" style="max-height:305px ; min-height: 300px;">
    
    <!-- <div class="row mb-4 canva mt-2"> -->
    <canvas baseChart *ngIf="pieChartData" class="chart"
    [data]="pieChartData"
    [labels]="pieChartLabels"
    [chartType]="pieChartType"
    [options]="pieChartOptions"
    [plugins]="pieChartPlugins"
    [legend]="pieChartLegend">
    
  </canvas>
<!-- </div> -->
  </div>
  <div>
    <button mat-raised-button (click)="exporter.exportTable('csv', {fileName:nameCampaign+nowFormatted})" class="right-bottom-center export-btn mb-2 p-2 ">Download Results</button>
     </div>
</div>

</div>
</div>
  <div class="card mt-2 col-xs-12 col-sm-12 col-md-12 col-lg-12">
    <div class="body col-xs-12 col-sm-12 col-md-12 col-lg-12" id="tablepart" >
      <div class="materialTableHeader col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="row" >
          <div class="col-2 center-vert-align">
                <h2 class="activity-type-text mt-4" id="h2-tag">
                  All Entries
                </h2>
          </div>
          <div class="col-3" style="max-height:35px ; min-height: 30px;">
            <div class="search" id="search-btn"> <i class="fa fa-search"></i> <input  (keyup)="applyFilter($event)" type="text"  class="form-control" placeholder="Search by Name"> </div>
          </div>
        
          <div class="col-3 mt-1 center-vert-align" id="filter">
            <mat-form-field style="border-bottom: red;">
              
              <mat-select style="background-color: white;margin-bottom:-7px;padding: 10px;border-radius: 5px; border: none;" (selectionChange)="filterDrop()" [(ngModel)]="this.select_val">
                <mat-option value="">All</mat-option>
                <mat-option value="Clicked">Clicked</mat-option>
                <mat-option value="sent" >Sent</mat-option>
                <mat-option value="Not Delivered">Not Delivered</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          
        </div>
      </div>

      <table mat-table matTableExporter #exporter="matTableExporter" [dataSource]="dataSource" class=" w-100" >
        <ng-container matColumnDef="sno">
            <th mat-header-cell *matHeaderCellDef  class="matcards" > S No. </th>
            <td mat-cell *matCellDef="let ele" class="matcontents">
              <mat-card class="mat-elevation-z0 tablemat mt-2 mb-2">
              {{ele.id}}
            </mat-card>
           </td>
        </ng-container>

          <ng-container matColumnDef="email">
            <th  mat-header-cell *matHeaderCellDef  class="matcards" >Email</th>
            <td mat-cell *matCellDef="let ele" class="matcontents">
              <mat-card class="mat-elevation-z0 tablemat mt-2 mb-2">
              {{ele.email}}
            </mat-card>
            </td>
          </ng-container>

          <ng-container matColumnDef="ip">
            <th mat-header-cell *matHeaderCellDef   class="matcards" >IP ADDRESS</th>
            <td  mat-cell *matCellDef="let ele" class="matcontents">
              <mat-card class="mat-elevation-z0 tablemat mt-2 mb-2">
              {{ele.ipAddress}}
            </mat-card>
            </td>
          </ng-container>

          <ng-container matColumnDef="status">
            <th  mat-header-cell *matHeaderCellDef  class="matcards" >Status</th>
            <td mat-cell *matCellDef="let ele" class="matcontents">
              <mat-card class="mat-elevation-z0 tablemat mt-2 mb-2">
              {{ele.status}}
            </mat-card>
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
      
      <div *ngIf="errormsg"  class="no_record center-align">
        <div class="row">
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
            <img src="../../../../assets/images/cross-icon.svg">
          </div>
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            No Entries Found
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

