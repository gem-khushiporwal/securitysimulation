<div class="container">
  <div class="mt-4 font-style d-flex align-items-center">
    <img [src]="this.shieldImg"/>
    <span class="choose-temp-txt">Please edit all the fields to create the campaign</span>
  </div>
  <div class="inner-container">
    <mat-card class="mat-card mt-4 mb-4 rounded">
      <form class="font-style" [formGroup]="templateForm">
        <div class="row">
          <mat-form-field
            class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 pb-3"
            appearance="outline"
          >
            <mat-label class="label-text">Name Of Campaign</mat-label>
            <input
              class="input-text"
              type="text"
              formControlName="name"
              matInput
              maxlength="25"
            />
            <mat-error
              class="input-error-top-margin"
              *ngIf="
                this.templateForm.controls['name'].errors != null &&
                this.templateForm.controls['name']['errors']['isInvalid']
              "
              >{{ this.templateForm.controls['name']['errors']['message']}}</mat-error
            >
            <mat-hint class="input-error-top-margin" align = "end">{{templateForm.value.name.length || 0}}/25</mat-hint>
          </mat-form-field>

          <mat-form-field
            class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 pb-3"
            appearance="outline"
          >
            <mat-label class="label-text">Email's Subject</mat-label>
            <input
              class="input-text"
              type="text"
              formControlName="subject"
              matInput
              maxlength="70"
            />
            <mat-error
              class="input-error-top-margin"
              *ngIf="
                this.templateForm.controls['subject'].errors != null &&
                this.templateForm.controls['subject']['errors']['isInvalid']
              "
              >{{ this.templateForm.controls['subject']['errors']['message']}}</mat-error
            >
            <mat-hint class="input-error-top-margin" align = "end">{{templateForm.value.subject.length || 0}}/70</mat-hint>
          </mat-form-field>
        </div>

        <mat-form-field
          *ngIf="isAmazonTemplateSelected()"
          class="w-100 pb-3"
          appearance="outline"
        >
          <mat-label class="label-text">Reward Type</mat-label>
          <input
            class="input-text"
            type="text"
            formControlName="rewardType"
            matInput
            maxlength="50"
          />
          <mat-error
            class="input-error-top-margin"
            *ngIf="
              this.templateForm.controls['rewardType'].errors != null &&
              this.templateForm.controls['rewardType']['errors']['isInvalid']"
              >{{ this.templateForm.controls['rewardType']['errors']['message']}}</mat-error
          >
          <mat-hint class="input-error-top-margin" align = "end">{{templateForm.value.rewardType.length || 0}}/50</mat-hint>
        </mat-form-field>

        <mat-form-field
          *ngIf="isAmazonTemplateSelected()"
          class="w-100 pb-3"
          appearance="outline"
        >
          <mat-label>Amount</mat-label>
          <input
            type="number"
            matInput
            formControlName="rewardAmount"
            oninput="validity.valid||(value='');"
            placeholder="Enter Reward Amount"
          />
          <mat-error
            class="input-error-top-margin"
            *ngIf="
              this.templateForm.controls['rewardAmount'].errors != null &&
              this.templateForm.controls['rewardAmount']['errors']['isInvalid']
            "
            >{{ this.templateForm.controls['rewardAmount']['errors']['message']}}</mat-error
          >
        </mat-form-field>

        <mat-form-field class="w-100 pb-4" appearance="outline">
          <mat-label class="label-text">Description</mat-label>
          <textarea
            class="input-text"
            type="text"
            formControlName="description"
            matInput
            maxlength="1500"
          ></textarea>
          <mat-error
            class="textarea-error-top-margin"
            *ngIf="
              this.templateForm.controls['description'].errors != null &&
              this.templateForm.controls['description']['errors']['isInvalid']
            "
            >{{ this.templateForm.controls['description']['errors']['message']}}</mat-error
          >
          <mat-hint class="textarea-error-top-margin" align = "end">{{templateForm.value.description.length || 0}}/1500</mat-hint>
        </mat-form-field>

        <mat-form-field class="w-100 pb-4" appearance="outline">
          <mat-label class="label-text">Add Note</mat-label>
          <textarea
            class="input-text"
            type="text"
            formControlName="note"
            matInput
            maxlength="200"
          ></textarea>
          <mat-error
            class="textarea-error-top-margin"
            *ngIf="
              this.templateForm.controls['note'].errors != null &&
              this.templateForm.controls['note']['errors']['isInvalid']
            "
            >{{ this.templateForm.controls['note']['errors']['message']}}</mat-error
          >
          <mat-hint class="textarea-error-top-margin" align = "end">{{templateForm.value.note.length || 0}}/200</mat-hint>
        </mat-form-field>

        <mat-form-field class="w-100 pb-3" appearance="outline">
          <mat-label class="label-text">Email Signature</mat-label>
          <input
            class="input-text"
            type="text"
            formControlName="emailSignature"
            matInput
            maxlength="40"
          />
          <mat-error
            class="input-error-top-margin"
            *ngIf="
              this.templateForm.controls['emailSignature'].errors != null &&
              this.templateForm.controls['emailSignature']['errors']['isInvalid']
            "
            >{{ this.templateForm.controls['emailSignature']['errors']['message']}}</mat-error
          >
          <mat-hint class="input-error-top-margin" align = "end">{{templateForm.value.emailSignature.length || 0}}/40</mat-hint>
        </mat-form-field>

        <div
          class="col-lg-12 col-md-12 col-sm-12 col-12"
          *ngFor="let mailId = index; let questionCtrl; of: getcontrols()"
          formArrayName="allEmails"
        >
          <div class="row" [formGroupName]="mailId">
            <mat-form-field
              appearance="outline"
              class="col-xl-11 col-lg-10 col-md-10 col-sm-10 col-10 pb-3"
            >
              <mat-label>Email for simulation</mat-label>
              <input matInput type="text" formControlName="senderEmail" class="input-text" />
              <mat-error
                class="input-error-top-margin"
                *ngIf="isEmailFieldInvalid(mailId)"
                >{{ emailFieldErrorMessage(mailId)}}</mat-error
              >
            </mat-form-field>
            <div class="col-xl-1 col-lg-2 col-md-2 col-sm-2 col-2 p-1">
              <button
                type="button"
                class="buttons w-75 h-75 border-0 rounded d-flex align-items-center justify-content-center"
                (click)="emailFieldOperation(mailId)"
              >
                <div *ngIf="mailId === 0" class="plus text-white">+</div>
                <mat-icon *ngIf="mailId > 0" class="cross text-white"
                  >clear</mat-icon
                >
              </button>
            </div>
          </div>
        </div>

        <span class="radio-title">Send Attachment : </span>
        <mat-radio-group
          (change)="changeAttachmentStatus($event)"
          formControlName="sendAttachment"
        >
          <mat-radio-button class="radio-text" [value]="false"
            >No&emsp;</mat-radio-button
          >
          <mat-radio-button class="radio-text" [value]="true"
            >Yes</mat-radio-button
          >
        </mat-radio-group>

        <mat-form-field
          *ngIf="isSdenAttachmentTrue()"
          class="w-100 mt-3 pb-4"
          appearance="outline"
        >
          <mat-label class="label-text">Provide The File Name</mat-label>
          <textarea
            class="input-text"
            type="text"
            formControlName="fileName"
            matInput
            maxlength="50"
          ></textarea>
          <mat-error
            class="textarea-error-top-margin"
            *ngIf="
              this.templateForm.controls['fileName'].errors != null &&
              this.templateForm.controls['fileName']['errors']['isInvalid']
            "
            >{{ this.templateForm.controls['fileName']['errors']['message']}}</mat-error
          >
          <mat-hint class="textarea-error-top-margin" align = "end">{{templateForm.value.fileName.length || 0}}/50</mat-hint>
        </mat-form-field>

        <mat-form-field
          *ngIf="isSdenAttachmentTrue()"
          class="w-100 pb-4"
          appearance="outline"
        >
          <mat-label class="label-text">Provide The File Content</mat-label>
          <textarea
            class="input-text"
            type="text"
            formControlName="fileContent"
            matInput
            maxlength="2000"
          ></textarea>
          <mat-error
            class="textarea-error-top-margin"
            *ngIf="
              this.templateForm.controls['fileContent'].errors != null &&
              this.templateForm.controls['fileContent']['errors']['isInvalid']
            "
            >{{ this.templateForm.controls['fileContent']['errors']['message']}}</mat-error
          >
          <mat-hint class="textarea-error-top-margin" align = "end">{{templateForm.value.fileContent.length || 0}}/2000</mat-hint>
        </mat-form-field>
        <div class="row d-flex justify-content-center mt-4 mb-3">
          <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 col-12 mb-2">
            <button (click)="checkFormData('Preview')" class="w-100 preview-btn rounded">Preview</button>
          </div>
          <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 col-12 mb-2">
            <button (click)="checkFormData('Schedule')" class="w-100 schedule-btn rounded" type="submit">
              Schedule Campaign
            </button>
          </div>
          <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 col-12">
            <button (click)="checkFormData('Send')" class="w-100 send-btn rounded" type="submit">
              Send Campaign
            </button>
          </div>
        </div>
      </form>
    </mat-card>
  </div>
</div>
